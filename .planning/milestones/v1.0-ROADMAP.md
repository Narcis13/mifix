# Milestone v1.0: MVP

**Status:** SHIPPED 2026-01-24
**Phases:** 1-6
**Total Plans:** 26

## Overview

Aplicatie web pentru evidenta si gestiunea mijloacelor fixe dintr-un spital, conform legislatiei romanesti. Inlocuieste un sistem FoxPro vechi care nu mai functioneaza pe hardware modern.

## Phases

### Phase 1: Foundation & Setup

**Goal:** Development environment ready with database schema, financial calculation patterns, and shared types established.
**Depends on:** None
**Plans:** 4 plans

Plans:
- [x] 01-01-PLAN.md — Initialize project from bhvr template
- [x] 01-02-PLAN.md — Configure Drizzle ORM with MySQL schema
- [x] 01-03-PLAN.md — Setup shadcn/ui, shared types, Money utility
- [x] 01-04-PLAN.md — Integration test and verification

**Details:**
- Bun + Hono + React + Vite monorepo structure
- MySQL with Drizzle ORM for type-safe queries
- shadcn/ui New York style with Neutral base
- Immutable Money class with decimal.js for financial precision
- Shared types package for client/server type safety

---

### Phase 2: Nomenclatoare

**Goal:** User can manage all reference data (gestiuni, locuri, surse finantare, conturi, clasificare) that assets depend on.
**Depends on:** Phase 1
**Plans:** 5 plans

Plans:
- [x] 02-01-PLAN.md — Dependencies, shadcn/ui components, routing, DataTable
- [x] 02-02-PLAN.md — Gestiuni CRUD (API + UI)
- [x] 02-03-PLAN.md — Surse Finantare CRUD + Clasificari read-only
- [x] 02-04-PLAN.md — Locuri de Folosinta CRUD with gestiune dependency
- [x] 02-05-PLAN.md — Conturi CRUD with conditional amortizare field

**Details:**
- Dialog-based forms for create/edit operations
- HG 2139/2004 classification catalog (read-only, seeded)
- DataTable with pagination, filtering, and loading states
- Zod validation with Romanian error messages

---

### Phase 3: Mijloace Fixe Core

**Goal:** User can register, list, view, and edit fixed assets with full data and validation.
**Depends on:** Phase 2
**Plans:** 6 plans

Plans:
- [x] 03-01-PLAN.md — Prerequisites: shadcn components + TipDocument nomenclator + schema updates
- [x] 03-02-PLAN.md — MijloaceFixe API (CRUD with filtering, pagination, joins)
- [x] 03-03-PLAN.md — Shared components: ClasificarePicker, StareBadge, MijlocFixFilters
- [x] 03-04-PLAN.md — Asset list page with DataTable and filtering
- [x] 03-05-PLAN.md — Asset form (create/edit) with multi-section layout
- [x] 03-06-PLAN.md — Asset detail page + final verification

**Details:**
- Multi-section Card form layout (Identificare, Document, Contabile, Amortizare)
- ClasificarePicker modal with search and pagination
- URL params sync with filter state (shareable/bookmarkable)
- 7-table joins for complete asset data

---

### Phase 4: Operatiuni

**Goal:** User can perform asset lifecycle operations (transfers, disposal) with complete audit trail.
**Depends on:** Phase 3
**Plans:** 4 plans

Plans:
- [x] 04-01-PLAN.md — Schema migration + Operatiuni API routes (transfer, casare, declasare)
- [x] 04-02-PLAN.md — Transfer dialogs (TransferGestiune + TransferLoc)
- [x] 04-03-PLAN.md — Casare + Declasare dialogs
- [x] 04-04-PLAN.md — Transaction history timeline + Detail page integration

**Details:**
- Atomic database transactions for operations
- Operations restricted to stare='activ' assets
- Vertical timeline component for transaction history
- Sonner for toast notifications

---

### Phase 5: Amortizare

**Goal:** User can calculate and track monthly depreciation for all active assets correctly.
**Depends on:** Phase 3
**Plans:** 3 plans

Plans:
- [x] 05-01-PLAN.md — Schema unique constraint + Amortizari API routes (batch generation, history, summary)
- [x] 05-02-PLAN.md — Per-asset depreciation history (AmortizariTable + detail page integration)
- [x] 05-03-PLAN.md — Amortizare page with generation dialog + summary view

**Details:**
- Linear depreciation (valoare inventar / durata in luni)
- Final month protection (no over-depreciation)
- Unique constraint prevents duplicate monthly entries
- Summary view with stats cards

---

### Phase 6: Rapoarte & Autentificare

**Goal:** User can generate compliance reports and access is secured with authentication.
**Depends on:** Phase 4, Phase 5
**Plans:** 4 plans

Plans:
- [x] 06-01-PLAN.md — Auth schema + API (users table, login/logout/me endpoints, JWT middleware)
- [x] 06-02-PLAN.md — Auth UI + Route protection (AuthContext, LoginForm, ProtectedRoute)
- [x] 06-03-PLAN.md — Reports API (fisa, balanta, jurnal, amortizare endpoints)
- [x] 06-04-PLAN.md — Reports UI + printing (dashboard, 4 report views, react-to-print)

**Details:**
- JWT in HttpOnly cookies (XSS protection)
- Argon2id password hashing via Bun.password
- 4 compliance reports (Fisa MF, Balanta, Jurnal, Situatie)
- CSS @media print styles for proper printing

---

## Milestone Summary

**Key Decisions:**
- Manual scaffold instead of bhvr template (template CLI failed)
- shadcn/ui New York style with Neutral base
- Immutable Money class for financial precision
- Dialog-based forms for nomenclator CRUD
- URL params sync for shareable filtered views
- Atomic db.transaction() for operations
- JWT in HttpOnly cookies for auth

**Issues Resolved:**
- Template CLI failure → manual equivalent scaffold
- Tailwind v4 migration → @import syntax
- Zod v4 breaking changes → nullable() for optional numbers
- shadcn toast not in v4 registry → sonner replacement

**Issues Deferred:**
- Console.log debug statements (4 total, non-blocking)

**Technical Debt Incurred:**
- None critical

---

*For current project status, see .planning/MILESTONES.md*

---
*Archived: 2026-01-24 as part of v1.0 milestone completion*
